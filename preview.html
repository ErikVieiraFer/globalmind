<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pr√©via do Diagn√≥stico - GlobalMind</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Source+Sans+3:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/pages/preview.css">
</head>
<body class="bg-bege">

    <header class="py-3 mb-4 border-bottom bg-white shadow-sm">
        <div class="container d-flex justify-content-center">
            <h1 class="display-6 fw-bold" style="color: var(--verde-oliva);">GlobalMind</h1>
        </div>
    </header>

    <main class="container">
        <div class="text-center mb-5">
            <h2 class="display-5" style="font-family: var(--font-display);">Diagn√≥stico Preliminar</h2>
            <p class="lead text-muted">Identificamos pontos cruciais na sua estrutura de lideran√ßa.</p>
        </div>

        <div class="row g-4">
            <!-- Coluna Esquerda: Amostra Gr√°tis -->
            <div class="col-lg-6">
                <div class="card mb-4 border-0 shadow-sm">
                    <div class="card-header bg-white border-bottom-0 pt-4 px-4">
                        <h4 class="mb-0 text-verde-oliva">√çndices Liberados</h4>
                    </div>
                    <div class="card-body p-4">
                        <!-- √çndice 1: Sobrecarga -->
                        <div class="mb-4">
                            <div class="d-flex justify-content-between mb-1">
                                <span class="fw-bold">Sobrecarga do L√≠der</span>
                                <span id="score-sobrecarga" class="fw-bold">Calculando...</span>
                            </div>
                            <div class="progress" style="height: 10px;">
                                <div id="bar-sobrecarga" class="progress-bar" role="progressbar" style="width: 0%"></div>
                            </div>
                            <p class="small text-muted mt-2">Indica o quanto a opera√ß√£o depende da sua decis√£o direta.</p>
                        </div>

                        <!-- √çndice 2: Risco -->
                        <div class="mb-2">
                            <div class="d-flex justify-content-between mb-1">
                                <span class="fw-bold">Risco Psicossocial (NR-1)</span>
                                <span id="score-risco" class="fw-bold">Calculando...</span>
                            </div>
                            <div class="progress" style="height: 10px;">
                                <div id="bar-risco" class="progress-bar" role="progressbar" style="width: 0%"></div>
                            </div>
                            <p class="small text-muted mt-2">N√≠vel de exposi√ß√£o da empresa a passivos trabalhistas e sa√∫de mental.</p>
                        </div>
                    </div>
                </div>

                <!-- CTA Box -->
                <div class="cta-box p-5 text-center mt-4">
                    <h3 class="mb-3">Desbloqueie seu Diagn√≥stico Completo</h3>
                    <p class="mb-4 opacity-75">Tenha acesso aos outros 4 √≠ndices essenciais, gr√°fico de radar detalhado e plano de a√ß√£o personalizado.</p>
                    <a href="cadastro.html" class="btn btn-primary btn-lg w-100 mb-3 bg-white text-dark border-white hover-opacity">Ver Resultado Completo</a>
                    <a href="https://wa.me/5527999833488" target="_blank" class="text-white text-decoration-none small opacity-75 hover-white">
                        Falar com um especialista agora &rarr;
                    </a>
                </div>
            </div>

            <!-- Coluna Direita: Conte√∫do Bloqueado -->
            <div class="col-lg-6">
                <div class="card h-100 border-0 shadow-sm position-relative overflow-hidden">
                    <div class="locked-overlay">
                        <div class="lock-icon">üîí</div>
                        <h4 class="fw-bold text-azul-petroleo">An√°lise Completa Bloqueada</h4>
                        <p class="text-muted mb-4">Cadastre-se gratuitamente para visualizar.</p>
                        <a href="cadastro.html" class="btn btn-primary px-4">Liberar Acesso</a>
                    </div>
                    
                    <div class="card-body p-4 blur-content">
                        <h4 class="mb-4 text-verde-oliva">An√°lise 360¬∫</h4>
                        
                        <!-- Fake Content para Blur -->
                        <div class="mb-4">
                            <div class="d-flex justify-content-between">
                                <span>Depend√™ncia do Dono</span>
                                <span>8.5 - Cr√≠tico</span>
                            </div>
                            <div class="progress mt-1" style="height: 10px;"><div class="progress-bar bg-danger" style="width: 85%"></div></div>
                        </div>
                        <div class="mb-4">
                            <div class="d-flex justify-content-between">
                                <span>Maturidade Emocional</span>
                                <span>4.2 - Aten√ß√£o</span>
                            </div>
                            <div class="progress mt-1" style="height: 10px;"><div class="progress-bar bg-warning" style="width: 42%"></div></div>
                        </div>
                        
                        <div class="chart-container mt-5" style="height: 300px; background: #f8f9fa; border-radius: 10px;"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="js/calculos.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Carregar dados parciais do localStorage
            const resultados = calcularResultados();
            
            if (resultados) {
                renderizarIndice('sobrecarga', resultados.sobrecarga_lider);
                renderizarIndice('risco', resultados.risco_psicossocial);
            }
        });

        function renderizarIndice(id, score) {
            const status = getStatus(score);
            const bar = document.getElementById(`bar-${id}`);
            const text = document.getElementById(`score-${id}`);
            
            bar.style.width = `${score * 10}%`;
            bar.className = `progress-bar bg-${status.classe}`;
            text.textContent = `${score.toFixed(1)} - ${status.texto}`;
            text.className = `fw-bold text-${status.classe}`;
        }

        function getStatus(score) {
            if (score >= 7) return { classe: 'danger', texto: 'Cr√≠tico' };
            if (score >= 4) return { classe: 'warning', texto: 'Aten√ß√£o' };
            return { classe: 'success', texto: 'Bom' };
        }
    </script>
</body>
</html>